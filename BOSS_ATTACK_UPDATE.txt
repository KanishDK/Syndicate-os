This file contains the complete updated attackBoss function for useGameActions.js
It will be used to replace the existing attackBoss function (lines 98-171)

NEW IMPLEMENTATION:
===================

    const attackBoss = useCallback((onDamage) => {
        setGameState(prev => {
            if (!prev.boss.active) return prev;

            // 1. Calculate Player Damage to Boss
            const baseDmg = prev.boss.damagePerClick || 10;
            const perkDmg = getPerkValue(prev, 'boss_dmg');

            // Defense Synergy
            const defenseBonus = Math.floor(
                ((prev.defense.guards * CONFIG.defense.guards.defenseVal) +
                    (prev.defense.cameras * CONFIG.defense.cameras.defenseVal) +
                    (prev.defense.bunker * CONFIG.defense.bunker.defenseVal)) * 0.1
            );

            // Critical Hit (10% chance)
            const isCrit = Math.random() < 0.10;
            const critMult = isCrit ? 2.0 : 1.0;

            // Boss Defense (reduces damage)
            const bossDef = Math.floor(prev.level * 0.5);
            const totalDmg = Math.max(1, Math.floor(((baseDmg + perkDmg) * critMult) + defenseBonus) - bossDef);

            // Callback for UI Feedback
            if (onDamage) onDamage(totalDmg, isCrit);

            const newBossHp = prev.boss.hp - totalDmg;

            if (isCrit) playSound('punch');

            // 2. Boss Attacks Player (every 2 seconds)
            const now = Date.now();
            const timeSinceLastAttack = now - (prev.boss.lastAttackTime || now);
            const BOSS_ATTACK_INTERVAL = prev.boss.enraged ? 1000 : 2000;
            
            let newPlayerHp = prev.boss.playerHp;
            let bossAttacked = false;
            
            if (timeSinceLastAttack >= BOSS_ATTACK_INTERVAL) {
                // Boss attacks!
                const bossAttackDmg = prev.boss.enraged 
                    ? Math.floor(prev.boss.attackDamage * 1.5) 
                    : prev.boss.attackDamage;
                    
                newPlayerHp = Math.max(0, prev.boss.playerHp - bossAttackDmg);
                bossAttacked = true;
                playSound('error'); // Boss attack sound
            }

            // 3. Check Enrage (25% HP)
            const hpPercent = newBossHp / prev.boss.maxHp;
            const shouldEnrage = hpPercent < 0.25 && !prev.boss.enraged;

            // 4. Player Defeated
            if (newPlayerHp <= 0) {
                playSound('error');
                const cashLoss = Math.floor(prev.dirtyCash * 0.1);
                
                return {
                    ...prev,
                    boss: { 
                        ...prev.boss, 
                        active: false,
                        playerHp: prev.boss.playerMaxHp 
                    },
                    heat: prev.heat + 15,
                    dirtyCash: prev.dirtyCash - cashLoss,
                    logs: [
                        { msg: `ðŸ’€ BOSS BESEJREDE DIG! Mistede ${formatNumber(cashLoss)} kr og fik +15 Heat.`, type: 'error', time: new Date().toLocaleTimeString() },
                        ...prev.logs
                    ].slice(0, 50),
                    pendingEvent: {
                        type: 'story',
                        data: {
                            title: 'NEDERLAG',
                            msg: `Bossen var for stÃ¦rk. Du flygtede med skader og mistede ${formatNumber(cashLoss)} kr.`,
                            type: 'error'
                        }
                    }
                };
            }

            // 5. Boss Defeated
            if (newBossHp <= 0) {
                playSound('success');
                
                // Speed Bonus (defeat in < 30 seconds)
                const timeElapsed = now - prev.boss.startTime;
                const speedBonus = timeElapsed < 30000 ? 1.5 : 1.0;
                
                const rewardMoney = Math.floor(CONFIG.boss.reward.money * (1 + (prev.level * 0.5)) * speedBonus);
                const rewardXP = Math.floor(CONFIG.boss.reward.xp * (1 + (prev.level * 0.2)) * speedBonus);

                const isFirstKill = (prev.boss.lastDefeatedLevel || 0) < prev.level;
                let logMsg = `âš”ï¸ BOSS BESEJRET! Drop: ${formatNumber(rewardMoney)} kr & ${formatNumber(rewardXP)} XP`;
                
                if (speedBonus > 1) {
                    logMsg += ` (âš¡ Speed Bonus: +50%)`;
                }

                let newUnlocks = [...(prev.unlockedAchievements || [])];

                if (isFirstKill) {
                    logMsg += ` & [RELIC] BOSS KEY`;
                    newUnlocks.push('boss_key_tier2');
                }

                return {
                    ...prev,
                    boss: { 
                        ...prev.boss, 
                        active: false, 
                        hp: 0, 
                        lastDefeatedLevel: prev.level,
                        playerHp: prev.boss.playerMaxHp 
                    },
                    completedMissions: [...prev.completedMissions, 'boss_defeated'],
                    unlockedAchievements: newUnlocks,
                    xp: prev.xp + rewardXP,
                    dirtyCash: prev.dirtyCash + rewardMoney,
                    logs: [{ msg: logMsg, type: 'success', time: new Date().toLocaleTimeString() }, ...prev.logs].slice(0, 50),
                    pendingEvent: {
                        type: 'story',
                        data: {
                            title: 'BYENS NYE KONGE',
                            msg: `Du har knust Bossen!${speedBonus > 1 ? ' Din hurtige sejr gav ekstra belÃ¸nning!' : ''}\n\n"Ingen kan stoppe mig nu!"`,
                            type: 'success'
                        }
                    }
                };
            }

            // 6. Continue Battle
            playSound('click');
            
            const newState = {
                ...prev,
                boss: { 
                    ...prev.boss, 
                    hp: newBossHp,
                    playerHp: newPlayerHp,
                    enraged: shouldEnrage || prev.boss.enraged,
                    lastAttackTime: bossAttacked ? now : prev.boss.lastAttackTime
                }
            };
            
            // Enrage notification
            if (shouldEnrage) {
                newState.logs = [
                    { msg: 'ðŸ”¥ BOSS ER RASENDE! Angreb Ã¸get!', type: 'warning', time: new Date().toLocaleTimeString() },
                    ...prev.logs
                ].slice(0, 50);
            }
            
            return newState;
        });
    }, [setGameState]);
